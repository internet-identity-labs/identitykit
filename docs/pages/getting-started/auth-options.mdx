---
title: "Auth options"
date: "2024-06-19"
authors:
  - name: "Dan Ostrovsky"
---

# Working with accounts vs delegations

Users will connect to your dApp by providing one of the following:

1. An account string or
2. A delegation object

Accounts are wallet addresses. You may query other smart contract canisters for balances and other
data associated with the account, and request user approval via wallet approval prompts to execute
transactions.

Delegations are accounts with the authority to execute transactions on the user's behalf, resulting
in the removal of wallet approval prompts, and come in two forms:

1. Account Delegations: Accounts with the authority to execute transactions to smart contract
   canisters your application owns without wallet approval prompts.
2. Relying Party Delegations: Accounts unique to your application's URL (never to be used for any
   other application on the network) with the authority to execute transactions for any smart
   contract canister on the network.

## When to request Accounts

Consider requesting a user's account when building dApps that:

- Look up account balance/data,
- Save user data meant to be composed with other ICP services, and
- Are meant to give users the highest degree of security

| Advantages                                                   | Disadvantages                                                       |
| ------------------------------------------------------------ | ------------------------------------------------------------------- |
| Simple integration                                           | Wallet prompts can be confusing for new Web3 users                  |
| Enables interoperability of data and assets across ecosystem | Would require a user signature to authenticate ownership of address |
| Familiar Web3 experience                                     |                                                                     |

### Usage

Add the `authOption="account"` prop.

```typescript
const App = () => {
  return (
    <IdentityKitProvider authOption="account" {...etc}>
      {/* Your App */}
    </IdentityKitProvider>
  );
};
```

## When to request Account Delegations

Consider requesting a user's account delegation when building dApps that:

- Look up account balance/data,
- Save user data meant to be composed with other ICP services, and
- Remove wallet prompts when making calls to smart contract canisters under your control (i.e. for
  chat and other social applications requiring many authenticated calls)

| Advantages                                                   | Disadvantages                                      |
| ------------------------------------------------------------ | -------------------------------------------------- |
| No wallet prompts for canisters under your control           | More integration effort                            |
| Enables interoperability of data and assets across ecosystem | Wallet prompts can be confusing for new Web3 users |
| Familiar Web3 experience                                     |                                                    |

### Usage

Add the `authOption="delegation"` prop and populate the `targets=""` prop with a list of your
canister IDs that follow
[ICRC-28](https://github.com/dfinity/wg-identity-authentication/blob/main/topics/icrc_28_trusted_origins.md).
In particular, that means each canister listed as a target must have a `icrc28_trusted_origins`
endpoint that returns an array of frontend URLs allowed to make authenticated calls to that canister
without wallet approval prompts.

```typescript
const App = () => {
  return (
    <IdentityKitProvider authOption="delegation" targets="" {...etc}>
      {/* Your App */}
    </IdentityKitProvider>
  );
};
```

## When to request Relying Party Delegations

Consider requesting a user's relying party delegation when building dApps that:

- Are meant to give users isolated profiles from other dApps on the network

| Advantages                                                                                       | Disadvantages                                                                      |
| ------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------- |
| No wallet prompts                                                                                | Users are isolated from the rest of the ecosystem by default (may be an advantage) |
| Delegation identifiers are viable wallet addresses that won't be seen elsewhere in the ecosystem | More effort to make data interoperable across ecosystem (may be an advantage)      |

### Usage

Add the `authOption="delegation"` prop.

```typescript
const App = () => {
  return (
    <IdentityKitProvider authOption="delegation" {...etc}>
      {/* Your App */}
    </IdentityKitProvider>
  );
};
```
